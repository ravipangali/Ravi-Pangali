if(window.themeManager){console.log('ThemeManager already initialized');}else{class ThemeManager{constructor(){console.log('ThemeManager constructor');this.currentTheme=localStorage.getItem('portfolio-theme')|| 'galaxy';this.themes={'galaxy':this.getGalaxyTheme(),'ocean':this.getOceanTheme(),'none':this.getNoThemeOption()};if(document.readyState==='loading'){console.log('DOM still loading,adding event listener');document.addEventListener('DOMContentLoaded',()=> this.initialize());}else{console.log('DOM already loaded,initializing immediately');this.initialize();}}initialize(){console.log('Initializing theme manager');this.initFloatingThemeSwitcher();this.setTheme(this.currentTheme);console.log(`ThemeManager initialized with theme:${this.currentTheme}`);setTimeout(()=>{const container=document.getElementById('theme-float-container');if(container){container.classList.add('show');}},2000);}initFloatingThemeSwitcher(){console.log('initFloatingThemeSwitcher');const toggleBtn=document.getElementById('theme-float-toggle');const dropdown=document.getElementById('theme-float-dropdown');const options=document.querySelectorAll('.theme-float-option');console.log('Theme elements:',{toggleBtn,dropdown,options});if(toggleBtn && dropdown){options.forEach(option=>{if(option.dataset.theme===this.currentTheme){option.classList.add('active');}});toggleBtn.addEventListener('click',(e)=>{console.log('Theme toggle clicked');e.preventDefault();e.stopPropagation();if(dropdown.classList.contains('show')){dropdown.classList.remove('show');dropdown.style.opacity='0';dropdown.style.visibility='hidden';dropdown.style.pointerEvents='none';}else{dropdown.classList.add('show');dropdown.style.opacity='1';dropdown.style.visibility='visible';dropdown.style.pointerEvents='auto';}toggleBtn.classList.add('animate-pulse');setTimeout(()=> toggleBtn.classList.remove('animate-pulse'),500);console.log('Theme toggle clicked,dropdown visibility:',dropdown.classList.contains('show'));});document.addEventListener('click',(e)=>{if(!dropdown.contains(e.target)&& !toggleBtn.contains(e.target)){dropdown.classList.remove('show');dropdown.style.opacity='0';dropdown.style.visibility='hidden';dropdown.style.pointerEvents='none';}});options.forEach(option=>{option.addEventListener('click',(e)=>{e.preventDefault();e.stopPropagation();const theme=option.dataset.theme;console.log('Theme option clicked:',theme);options.forEach(opt=> opt.classList.remove('active'));option.classList.add('active');this.setTheme(theme);localStorage.setItem('portfolio-theme',theme);dropdown.classList.remove('show');console.log(`Theme switched to:${theme}`);setTimeout(()=>{window.location.reload();},300);});});}else{console.warn('Theme toggle button or dropdown not found:',{toggleBtn,dropdown});}}setTheme(theme){document.body.classList.remove('theme-galaxy','theme-ocean','theme-none');Object.values(this.themes).forEach(theme=>{if(theme && typeof theme.disable==='function'){theme.disable();}});if(this.themes[theme]){document.body.classList.add(`theme-${theme}`);if(typeof this.themes[theme].enable==='function'){this.themes[theme].enable();}}this.currentTheme=theme;}getGalaxyTheme(){return{enable:()=>{const galaxyBackground=document.getElementById('galaxy-background');if(galaxyBackground){galaxyBackground.style.display='block';}if(window.initGalaxyScene && typeof window.initGalaxyScene==='function'){window.initGalaxyScene();}else{console.warn('Galaxy scene initialization function not found');}},disable:()=>{const galaxyBackground=document.getElementById('galaxy-background');if(galaxyBackground){galaxyBackground.style.display='none';}if(window.stopGalaxyAnimation && typeof window.stopGalaxyAnimation==='function'){window.stopGalaxyAnimation();}}};}getOceanTheme(){return{enable:()=>{if(!document.getElementById('ocean-css')){const link=document.createElement('link');link.id='ocean-css';link.rel='stylesheet';link.href='/static/css/themes/ocean.css';document.head.appendChild(link);}if(!window.initOceanScene){const script=document.createElement('script');script.src='/static/js/themes/ocean.js';script.onload=()=>{if(window.initOceanScene)window.initOceanScene();};document.body.appendChild(script);}else{window.initOceanScene();}},disable:()=>{if(window.stopOceanScene)window.stopOceanScene();const link=document.getElementById('ocean-css');if(link)link.remove();}};}getNoThemeOption(){return{enable:()=>{const galaxyBackground=document.getElementById('galaxy-background');if(galaxyBackground){galaxyBackground.style.display='none';}},disable:()=>{}};}}window.themeManager=new ThemeManager();console.log('ThemeManager initialized:',window.themeManager.currentTheme);}window.getGalaxyTheme=()=> window.themeManager.getGalaxyTheme();